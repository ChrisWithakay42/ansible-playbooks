kubernetes_flavor: k3s
kubeconfig_user: pi
cluster_name: homelab

# Helm chart management
helm_enabled: false

cilium_helm_values:
  kubeProxyReplacement: true
  k8sServiceHost: "{{ hostvars[groups['k3s_masters'][0]]['ansible_host'] | default(hostvars[groups['k3s_masters'][0]]['inventory_hostname']) }}"
  k8sServicePort: 6443
  l2announcements:
    enabled: true
  externalIPs:
    enabled: true
  hubble:
    relay:
      enabled: true
    ui:
      enabled: true
  loadBalancer:
    algorithm: maglev
  ipam:
    mode: kubernetes
  ingressController:
    enabled: true
    loadbalancer:
      mode: shared
    service:
      type: LoadBalancer

helm_repositories:
  - name: cilium
    repo_url: "https://helm.cilium.io/"

helm_charts:
  - name: cilium
    chart_ref: cilium/cilium
    namespace: kube-system
    create_namespace: true
    values: "{{ cilium_helm_values }}"
